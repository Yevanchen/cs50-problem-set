<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åœ°ç†å®šä½è¯¦ç»†æ¼”ç¤º</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .info-box {
            background: #e7f3ff;
            padding: 15px;
            border-left: 4px solid #2196F3;
            margin: 15px 0;
        }
        .result {
            background: #e8f5e8;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
            font-family: monospace;
        }
        .error {
            background: #ffebee;
            color: #d32f2f;
            padding: 15px;
            border-radius: 5px;
            margin: 15px 0;
        }
        button {
            background: #2196F3;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #1976D2;
        }
        .code-block {
            background: #f8f8f8;
            padding: 15px;
            border-radius: 5px;
            font-family: monospace;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸŒ JavaScriptåœ°ç†å®šä½è¯¦ç»†æ¼”ç¤º</h1>
        
        <div class="info-box">
            <h3>ğŸ” åœ°ç†å®šä½æ•°æ®æ¥æºï¼š</h3>
            <ul>
                <li><strong>GPSä¿¡å·</strong> - ç§»åŠ¨è®¾å¤‡çš„GPSèŠ¯ç‰‡</li>
                <li><strong>Wi-Fiç½‘ç»œ</strong> - åŸºäºå·²çŸ¥Wi-Fiçƒ­ç‚¹ä½ç½®</li>
                <li><strong>æ‰‹æœºåŸºç«™</strong> - ç§»åŠ¨ç½‘ç»œåŸºç«™ä¸‰è§’å®šä½</li>
                <li><strong>IPåœ°å€</strong> - åŸºäºç½‘ç»œIPçš„å¤§æ¦‚ä½ç½®</li>
            </ul>
        </div>

        <h2>ğŸ“± è·å–ä½ç½®ä¿¡æ¯</h2>
        <button onclick="getLocation()">ğŸ“ è·å–æˆ‘çš„ä½ç½®</button>
        <button onclick="watchLocation()">ğŸ‘€ æŒç»­ç›‘æ§ä½ç½®</button>
        <button onclick="stopWatching()">â¹ï¸ åœæ­¢ç›‘æ§</button>
        
        <div id="result"></div>
        
        <h2>ğŸ”§ ä»£ç å®ç°</h2>
        <div class="code-block">
// åŸºç¡€ç”¨æ³•
navigator.geolocation.getCurrentPosition(
    function(position) {
        // æˆåŠŸè·å–ä½ç½®
        console.log("çº¬åº¦: " + position.coords.latitude);
        console.log("ç»åº¦: " + position.coords.longitude);
    },
    function(error) {
        // è·å–å¤±è´¥
        console.log("é”™è¯¯: " + error.message);
    },
    {
        // é€‰é¡¹é…ç½®
        enableHighAccuracy: true,  // é«˜ç²¾åº¦
        timeout: 10000,           // è¶…æ—¶æ—¶é—´
        maximumAge: 60000         // ç¼“å­˜æ—¶é—´
    }
);
        </div>

        <h2>ğŸ“Š ä½ç½®å¯¹è±¡å±æ€§è¯¦è§£</h2>
        <div class="info-box">
            <ul>
                <li><strong>latitude</strong> - çº¬åº¦ (-90 åˆ° 90)</li>
                <li><strong>longitude</strong> - ç»åº¦ (-180 åˆ° 180)</li>
                <li><strong>accuracy</strong> - ç²¾åº¦ï¼ˆç±³ï¼‰</li>
                <li><strong>altitude</strong> - æµ·æ‹”é«˜åº¦ï¼ˆç±³ï¼Œå¯èƒ½ä¸ºnullï¼‰</li>
                <li><strong>altitudeAccuracy</strong> - æµ·æ‹”ç²¾åº¦ï¼ˆç±³ï¼‰</li>
                <li><strong>heading</strong> - æ–¹å‘ï¼ˆåº¦ï¼Œå¯èƒ½ä¸ºnullï¼‰</li>
                <li><strong>speed</strong> - é€Ÿåº¦ï¼ˆç±³/ç§’ï¼Œå¯èƒ½ä¸ºnullï¼‰</li>
                <li><strong>timestamp</strong> - è·å–æ—¶é—´æˆ³</li>
            </ul>
        </div>

        <h2>âš ï¸ éšç§å’Œæƒé™</h2>
        <div class="info-box">
            <p><strong>æµè§ˆå™¨å®‰å…¨æœºåˆ¶ï¼š</strong></p>
            <ul>
                <li>ğŸ”’ éœ€è¦ç”¨æˆ·æ˜ç¡®æˆæƒ</li>
                <li>ğŸŒ HTTPSç½‘ç«™ä¼˜å…ˆçº§æ›´é«˜</li>
                <li>ğŸ“µ ç”¨æˆ·å¯ä»¥éšæ—¶æ’¤é”€æƒé™</li>
                <li>ğŸš« å¯èƒ½è¢«æµè§ˆå™¨/ç³»ç»Ÿé˜»æ­¢</li>
            </ul>
        </div>

        <h2>ğŸŒ å®é™…åº”ç”¨åœºæ™¯</h2>
        <div class="info-box">
            <ul>
                <li>ğŸ“ <strong>åœ°å›¾å¯¼èˆª</strong> - Google Mapsã€ç™¾åº¦åœ°å›¾</li>
                <li>ğŸ›’ <strong>æœ¬åœ°æœåŠ¡</strong> - é™„è¿‘å•†åº—ã€é¤å…æ¨è</li>
                <li>ğŸŒ¤ï¸ <strong>å¤©æ°”æœåŠ¡</strong> - æ˜¾ç¤ºå½“åœ°å¤©æ°”</li>
                <li>ğŸ“± <strong>ç¤¾äº¤åº”ç”¨</strong> - ä½ç½®ç­¾åˆ°ã€é™„è¿‘çš„äºº</li>
                <li>ğŸš— <strong>æ‰“è½¦è½¯ä»¶</strong> - ç¡®å®šä¸Šè½¦åœ°ç‚¹</li>
                <li>ğŸ“ˆ <strong>æ•°æ®åˆ†æ</strong> - ç”¨æˆ·è¡Œä¸ºåˆ†æ</li>
            </ul>
        </div>
    </div>

    <script>
        let watchId = null;
        let resultDiv = document.getElementById('result');

        function getLocation() {
            resultDiv.innerHTML = '<p>ğŸ”„ æ­£åœ¨è·å–ä½ç½®ä¿¡æ¯...</p>';
            
            if (!navigator.geolocation) {
                resultDiv.innerHTML = '<div class="error">âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½</div>';
                return;
            }

            navigator.geolocation.getCurrentPosition(
                function(position) {
                    displayPosition(position);
                },
                function(error) {
                    displayError(error);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 10000,
                    maximumAge: 60000
                }
            );
        }

        function watchLocation() {
            if (!navigator.geolocation) {
                resultDiv.innerHTML = '<div class="error">âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½</div>';
                return;
            }

            watchId = navigator.geolocation.watchPosition(
                function(position) {
                    displayPosition(position, true);
                },
                function(error) {
                    displayError(error);
                },
                {
                    enableHighAccuracy: true,
                    timeout: 5000,
                    maximumAge: 1000
                }
            );

            resultDiv.innerHTML = '<p>ğŸ‘€ å¼€å§‹æŒç»­ç›‘æ§ä½ç½®...</p>';
        }

        function stopWatching() {
            if (watchId !== null) {
                navigator.geolocation.clearWatch(watchId);
                watchId = null;
                resultDiv.innerHTML += '<p>â¹ï¸ å·²åœæ­¢ä½ç½®ç›‘æ§</p>';
            }
        }

        function displayPosition(position, isWatching = false) {
            const coords = position.coords;
            const timestamp = new Date(position.timestamp);
            
            const html = `
                <div class="result">
                    <h3>${isWatching ? 'ğŸ¯ ä½ç½®æ›´æ–°' : 'ğŸ“ ä½ç½®ä¿¡æ¯'}</h3>
                    <p><strong>çº¬åº¦:</strong> ${coords.latitude}Â°</p>
                    <p><strong>ç»åº¦:</strong> ${coords.longitude}Â°</p>
                    <p><strong>ç²¾åº¦:</strong> ${coords.accuracy} ç±³</p>
                    ${coords.altitude ? `<p><strong>æµ·æ‹”:</strong> ${coords.altitude} ç±³</p>` : ''}
                    ${coords.heading ? `<p><strong>æ–¹å‘:</strong> ${coords.heading}Â°</p>` : ''}
                    ${coords.speed ? `<p><strong>é€Ÿåº¦:</strong> ${coords.speed} ç±³/ç§’</p>` : ''}
                    <p><strong>è·å–æ—¶é—´:</strong> ${timestamp.toLocaleString()}</p>
                    <p><strong>Google Mapsé“¾æ¥:</strong> 
                        <a href="https://www.google.com/maps?q=${coords.latitude},${coords.longitude}" target="_blank">
                            æŸ¥çœ‹åœ°å›¾ä½ç½®
                        </a>
                    </p>
                </div>
            `;
            
            if (isWatching) {
                resultDiv.innerHTML += html;
            } else {
                resultDiv.innerHTML = html;
            }
        }

        function displayError(error) {
            let errorMsg = '';
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    errorMsg = "âŒ ç”¨æˆ·æ‹’ç»äº†åœ°ç†å®šä½è¯·æ±‚";
                    break;
                case error.POSITION_UNAVAILABLE:
                    errorMsg = "âŒ ä½ç½®ä¿¡æ¯ä¸å¯ç”¨";
                    break;
                case error.TIMEOUT:
                    errorMsg = "âŒ è·å–ä½ç½®ä¿¡æ¯è¶…æ—¶";
                    break;
                default:
                    errorMsg = "âŒ å‘ç”ŸæœªçŸ¥é”™è¯¯";
                    break;
            }
            
            resultDiv.innerHTML = `
                <div class="error">
                    <h3>è·å–ä½ç½®å¤±è´¥</h3>
                    <p>${errorMsg}</p>
                    <p><strong>é”™è¯¯è¯¦æƒ…:</strong> ${error.message}</p>
                    <p><strong>é”™è¯¯ä»£ç :</strong> ${error.code}</p>
                </div>
            `;
        }

        // é¡µé¢åŠ è½½æ—¶æ˜¾ç¤ºæ”¯æŒçŠ¶æ€
        window.addEventListener('load', function() {
            if (navigator.geolocation) {
                console.log('âœ… æµè§ˆå™¨æ”¯æŒåœ°ç†å®šä½API');
            } else {
                console.log('âŒ æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½API');
                resultDiv.innerHTML = '<div class="error">âŒ æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒåœ°ç†å®šä½åŠŸèƒ½</div>';
            }
        });
    </script>
</body>
</html>
